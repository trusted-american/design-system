{{! TODO: avoid duplication }}
{{#if (and @route @query)}}
  <LinkTo
    @route={{@route}}
    @query={{@query}}
    class="btn
      {{if @size (concat 'btn-' @size)}}
      btn-{{if @outline 'outline-' ''}}{{if @color @color 'secondary'}}
      {{if @isFullWidth 'w-100'}}"
    role="button"
    ...attributes
  >
    {{if (and (not @iconOnly) @iconTrailing) @text}}
    {{#if @icon}}
      <Icon
        @icon={{@icon}}
        @prefix={{@iconPrefix}}
        class={{unless @iconOnly (if @iconTrailing "ms-1" "me-1")}}
        role="presentation"
      />
    {{/if}}
    {{if (and (not @iconOnly) (not @iconTrailing)) @text}}
  </LinkTo>
{{else if @route}}
  <LinkTo
    @route={{@route}}
    class="btn
      {{if @size (concat 'btn-' @size)}}
      btn-{{if @outline 'outline-' ''}}{{if @color @color 'secondary'}}
      {{if @isFullWidth 'w-100'}}"
    role="button"
    ...attributes
  >
    {{if (and (not @iconOnly) @iconTrailing) @text}}
    {{#if @icon}}
      <Icon
        @icon={{@icon}}
        @prefix={{@iconPrefix}}
        class={{unless @iconOnly (if @iconTrailing "ms-1" "me-1")}}
        role="presentation"
      />
    {{/if}}
    {{if (and (not @iconOnly) (not @iconTrailing)) @text}}
  </LinkTo>
{{else if @query}}
  <LinkTo
    @query={{@query}}
    class="btn
      {{if @size (concat 'btn-' @size)}}
      btn-{{if @outline 'outline-' ''}}{{if @color @color 'secondary'}}
      {{if @isFullWidth 'w-100'}}"
    role="button"
    ...attributes
  >
    {{if (and (not @iconOnly) @iconTrailing) @text}}
    {{#if @icon}}
      <Icon
        @icon={{@icon}}
        @prefix={{@iconPrefix}}
        class={{unless @iconOnly (if @iconTrailing "ms-1" "me-1")}}
        role="presentation"
      />
    {{/if}}
    {{if (and (not @iconOnly) (not @iconTrailing)) @text}}
  </LinkTo>
{{else if @href}}
  <ExternalLink
    @href={{@href}}
    @text={{@text}}
    @icon={{@icon}}
    @iconPrefix={{@iconPrefix}}
    @iconTrailing={{@iconTrailing}}
    @iconOnly={{@iconOnly}}
    class="btn
      {{if @size (concat 'btn-' @size)}}
      btn-{{if @outline 'outline-' ''}}{{if @color @color 'secondary'}}
      {{if @isFullWidth 'w-100'}}"
    role="button"
    ...attributes
  />
{{else}}
  <button
    type={{if @isSubmit "submit" "button"}}
    class="btn
      {{if @size (concat 'btn-' @size)}}
      btn-{{if @outline 'outline-' ''}}{{if @color @color 'secondary'}}
      {{if @isFullWidth 'w-100'}}"
    disabled={{if @loading true}}
    aria-label={{if @iconOnly @text}}
    ...attributes
  >
    {{#if @loading}}
      <span class="spinner-border spinner-border-sm" role="status"></span>
    {{/if}}
    {{if (and (not @iconOnly) @iconTrailing) @text}}
    {{#if @icon}}
      <Icon
        @icon={{@icon}}
        @prefix={{@iconPrefix}}
        class={{unless @iconOnly (if @iconTrailing "ms-1" "me-1")}}
      />
    {{/if}}
    {{if (and (not @iconOnly) (not @iconTrailing)) @text}}
    {{#if @count}}
      <span class="text-warning ms-1">{{@count}}</span>
    {{/if}}
  </button>
{{/if}}